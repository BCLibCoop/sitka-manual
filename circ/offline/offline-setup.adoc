Set up Workstations for Offline Circulation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


Prior to using Offline Circulation, you need to do the following, which requires network access:


*Register the workstation* in the recommended browser on the computers you intend to use. Local system administrator's account is required to do it.

*Load configuration information* by performing a patron search. Select any patron nn the result list. Go to Edit tab. The relevent configuration information for the workstation is loaded during this process. 

*Download Offline Block List*. The list contains patrons with blocks at the time of the download. Offline Circulation will check patrons against this list and prompt staff if a patron is found on the list when you try to check out and renew items.

To download the block list, navigate to *Circulation -> Offline Circulation*. Click *Download Block List* button.

image::images/circ/downloadblocklist.png[]

NOTE: This procedure should be repeated on a regular basis (daily, weekly etc.)

The following procedures are optional, depending on whether you install and chooe to store offline transactions in Hatch.

[TIP]
====
By default, offline transactions are kept in the browser as cookies. Clearing the browser's cookies may delete them. 

Hatch is Evergreen's printing and storage management tool. It allows libraries to set up default printers for different kinds of printing jobs, e.g. a printer for receipt printing and another for label printing. It also allows libraries to keep the offline transaction file and workstation settings in a local folder outside the browser. Clearing browser's cookies will not impact the settings or delete pending offline transactions. However, we strongly recommend you not unnecessarily keep offline transactions locally. You should upload them as soon as your network is restored.
====

*Set up a default printer for Offline Circulation*, go to *Administration -> Workstation -> Printer Settings*.

*Switch to store offline transactions to Hatch*, you need to log into Evergreen with a local system administrator account.

. Go to *Administration -> Workstation*. 
. Click *Print/Storage Service ('Hatch')*
. Make sure that you see that Hatch is available. Click *Store Offline Transaction Data in Hatch*.


////
Save Offline URL
^^^^^^^^^^^^^^^^


The permanent link for *Offline Circulation* is *https://catalogue.libraries.coop/eg/staff/offline-interface* we recommend that this link is bookmarked on staff workstations.  This is the location for both entering transactions while offline as well as processing them later.  You will see a slightly different version of this interface depending on whether or not you are logged in.
+
* If you are logged out, you will see the tab default to *Checkout* and the button on the top-right will read *Export Transactions*.
+
image::images/circ/offlineloggedout.png[]
+
* If you are logged in, you will see an additional tab on the left for *Session Management* and this will be the default tab.  The top-right button will read *Download Block List*.
+
image::images/circ/offlineloggedin.png[]
+
* If you are logged in and attempt to click on any tab other than *Session Management*, you will see a warning alerting you that you are about to enter offline mode.
+
image::images/circ/offline_warning.png[]
+
** This warning is not network-aware and it will appear regardless of network connection state.  You must be logged out to record offline transactions.
** If you see this warning and wish to record offline transactions, click *Proceed* in order to log out.
+
Download Offline Block List
^^^^^^^^^^^^^^^^^^^^^^^^^^^
+
While logged in and still online, you may download an *Offline Block List*.  This will locally store a list of all patrons with blocks at the time of the download.  If this list is present, *Offline Circulation* will check transactions against this list.
+
To download the block list, navigate to *Circulation* -> *Offline Circulation* and click the *Download Block List* button in the top-right of the screen.
+
image::images/circ/downloadblocklist.png[]
+
If you attempt a checkout or a renewal for a patron on the block list, you will get a modal informing you that the patron has penalties.  Click the *Allow* button to override this and proceed with the transaction.  Click the *Reject* button to cancel the checkout or renewal.



Set Offline Printer
^^^^^^^^^^^^^^^^^^^

Print using chrome
++++++++++++++++++

Browser print options - no additional setup required.

Print using Hatch
+++++++++++++++++

xref:download-hatch-ref[] must be installed and enabled on your workstation

. Click *Administration* -> *Workstation* -> *Printer Settings*.
. Click *Offline* ->


Save Patron Registration Form
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

. Click *Circulation* -> *Offline Circulation*
. *Search* -> *Search for Patrons*.
. Perform a search -> select a user from the results -> and open the *Patron Edit* interface.
.. This will allow the Offline interface to collect the information it needs, such as workstation information and the patron registration form.
////